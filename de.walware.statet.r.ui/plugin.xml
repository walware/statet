<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<!--
 #=============================================================================#
 # Copyright (c) 2005-2014 Stephan Wahlbrink (WalWare.de) and others.
 # All rights reserved. This program and the accompanying materials
 # are made available under the terms of the Eclipse Public License v1.0
 # which accompanies this distribution, and is available at
 # http://www.eclipse.org/legal/epl-v10.html
 # 
 # Contributors:
 #     Stephan Wahlbrink - initial API and implementation
 #=============================================================================#
-->

<plugin>

   <extension
         point="de.walware.ecommons.ltk.modelTypes">
      <unitType modelTypeId="r"
            contextKey="editor.default"
            unitFactory="de.walware.statet.r.internal.ui.REditorWorkingCopyFactory">
      </unitType>
   </extension>

   <extension
         point="org.eclipse.core.runtime.preferences">
      <initializer class="de.walware.statet.r.internal.ui.RUIPreferenceInitializer"/>
   </extension>

   <extension
         point="org.eclipse.ui.ide.projectNatureImages">
      <image
            icon="icons/ovr_16/r_project.png"
            id="de.walware.statet.r.images.RProjectImage"
            natureId="de.walware.statet.r.RNature"/>
   </extension>
   <extension
         point="de.walware.eutils.autonature.autoConfigurations">
      <onFileContent
            contentTypeId="de.walware.statet.r.contentTypes.R"
            enable="true">
         <ensureProjectNature
               natureId="de.walware.statet.r.RNature"/>
      </onFileContent>
   </extension>
   <extension
         point="org.eclipse.ui.decorators">
      <decorator
            id="de.walware.statet.r.decorators.RProjectDecorator"
            class="de.walware.statet.r.internal.ui.nolazy.RResourceDecorator"
            lightweight="true"
            label="%decorators_RProjectDecorator_label"
            state="true"
            adaptable="false">
         <enablement>
            <objectClass
                  name="org.eclipse.core.resources.IProject">
            </objectClass>
         </enablement>
      </decorator>
   </extension>
   <extension
         point="org.eclipse.core.variables.dynamicVariables">
      <variable
            name="r_pkg_base_path"
            description="%variables_RPkgBasePath_description"
            supportsArgument="true"
            resolver="de.walware.statet.r.ui.rtool.RProjectVariableResolver">
      </variable>
      <variable
            name="r_pkg_name"
            description="%variables_RPkgName_description"
            supportsArgument="true"
            resolver="de.walware.statet.r.ui.rtool.RProjectVariableResolver">
      </variable>
   </extension>
   <extension
         point="org.eclipse.core.filebuffers.documentSetup">
      <participant
            class="de.walware.statet.r.ui.editors.RDocumentSetupParticipant"
            contentTypeId="de.walware.statet.r.contentTypes.R"/>
   </extension>
   <extension
         point="org.eclipse.core.filebuffers.documentSetup">
      <participant
            class="de.walware.statet.r.ui.editors.RdDocumentSetupParticipant"
            contentTypeId="de.walware.statet.r.contentTypes.Rd"/>
   </extension>

   <extension
         point="org.eclipse.ui.editors">
      <editor
            class="de.walware.statet.r.internal.ui.editors.REditor"
            contributorClass="org.eclipse.ui.editors.text.TextEditorActionContributor"
            default="true"
            icon="icons/obj_16/r-file_obj.gif"
            id="de.walware.statet.r.editors.R"
            name="%editors.RScriptEditor.name">
         <contentTypeBinding contentTypeId="de.walware.statet.r.contentTypes.R"/>
      </editor>
      <editor
            class="de.walware.statet.r.internal.ui.editors.RdEditor"
            contributorClass="org.eclipse.ui.editors.text.TextEditorActionContributor"
            default="true"
            icon="icons/obj_16/rd-file_obj.gif"
            id="de.walware.statet.r.editors.Rd"
            name="%editors.RDocEditor.name">
         <contentTypeBinding contentTypeId="de.walware.statet.r.contentTypes.Rd"/>
      </editor>
   </extension>

   <extension
         point="org.eclipse.ui.editors.templates">
      <include
            file="templates/default-code-templates.xml"
            translations="templates/default-templates.properties"/>
      <include
            file="templates/default-reditor-templates.xml"
            translations="templates/default-templates.properties"/>
   </extension>

   <extension point="de.walware.ecommons.ltk.advancedContentAssist">
      <category
            id="templates"
            name="%contentAssist_TemplateCategory_name">
      </category>
      <computer
            id="de.walware.statet.r.contentAssistComputers.TemplateCompletion"
            contentTypeId="de.walware.statet.r.contentTypes.R"
            categoryId="templates"
            class="de.walware.statet.r.internal.ui.editors.REditorTemplatesCompletionComputer">
         <partition
               partitionType="__r_default">
         </partition>
         <partition
               partitionType="__r_comment">
         </partition>
         <partition
               partitionType="__r_roxygen">
         </partition>
      </computer>
      <category
            id="paths"
            name="%contentAssist_ResourceCategory_name">
      </category>
      <computer
            id="de.walware.statet.r.contentAssistComputers.RPathCompletion"
            contentTypeId="de.walware.statet.r.contentTypes.R"
            categoryId="paths"
            class="de.walware.statet.r.ui.sourceediting.RPathCompletionComputer">
         <partition
               partitionType="__r_string">
         </partition>
      </computer>
      <category
            id="r-elements"
            name="%contentAssist_RCategory_name">
      </category>
      <computer
            id="de.walware.statet.r.contentAssistComputers.RCompletion"
            contentTypeId="de.walware.statet.r.contentTypes.R"
            categoryId="r-elements"
            class="de.walware.statet.r.ui.sourceediting.RElementsCompletionComputer">
         <partition
               partitionType="__r_default">
         </partition>
         <partition
               partitionType="__r_symbol_quoted">
         </partition>
      </computer>
      <category
            id="r-elements.runtime"
            name="%contentAssist_RRuntimeCategory_name">
      </category>
      <computer
            id="de.walware.statet.r.contentAssistComputers.RCompletionFromRuntime"
            contentTypeId="de.walware.statet.r.contentTypes.R"
            categoryId="r-elements.runtime"
            class="de.walware.statet.r.ui.sourceediting.RElementsCompletionComputer$CompleteRuntime">
         <partition
               partitionType="__r_default">
         </partition>
         <partition
               partitionType="__r_symbol_quoted">
         </partition>
      </computer>
      <computer
            id="de.walware.statet.r.contentAssistComputers.RoxygenCompletion"
            contentTypeId="de.walware.statet.r.contentTypes.R"
            categoryId="r-elements"
            class="de.walware.statet.r.internal.ui.editors.RoxygenCompletionComputer">
         <partition
               partitionType="__r_roxygen">
         </partition>
      </computer>
   </extension>
   <extension
         point="de.walware.ecommons.ltk.advancedInfoHover">
      <hover
            id="de.walware.statet.r.contentInfoHover.RCombinedHover"
            contentTypeId="de.walware.statet.r.contentTypes.R"
            name="Combined Hover"
            class="de.walware.ecommons.ltk.ui.sourceediting.assist.CombinedHover">
      </hover>
      <hover
            id="de.walware.statet.r.contentInfoHover.RHelpHover"
            contentTypeId="de.walware.statet.r.contentTypes.R"
            name="R Help"
            class="de.walware.statet.r.internal.ui.rhelp.RHelpHover">
      </hover>
   </extension>

   <extension
         point="org.eclipse.ui.workbench.texteditor.hyperlinkDetectorTargets">
      <target
            id="de.walware.statet.r.editorHyperlinks.REditorTarget"
            name="%editorHyperlinks.REditorTarget.name">
         <context
               type="de.walware.ecommons.ltk.ui.sourceediting.SourceEditor1">
         </context>
      </target>
   </extension>
   <extension
         point="org.eclipse.ui.workbench.texteditor.hyperlinkDetectors">
      <hyperlinkDetector
            id="de.walware.statet.r.editorHyperlinks.FileDetector"
            targetId="de.walware.statet.r.editorHyperlinks.REditorTarget"
            name="%editorHyperlinks.FileDetector.name"
            class="de.walware.statet.r.internal.ui.editors.RFileHyperlinkDetector"
            activate="true">
      </hyperlinkDetector>
      <hyperlinkDetector
            id="de.walware.statet.r.editorHyperlinks.RElementDetector"
            targetId="de.walware.statet.r.editorHyperlinks.REditorTarget"
            name="%editorHyperlinks.RElement.name"
            class="de.walware.statet.r.internal.ui.editors.RElementHyperlinkDetector"
            activate="true">
      </hyperlinkDetector>
   </extension>

   <extension
         point="org.eclipse.core.expressions.definitions">
      <definition
            id="de.walware.statet.r.expressions.RSourceElement">
         <or>
            <with
                  variable="selection">
               <instanceof
                     value="org.eclipse.jface.viewers.IStructuredSelection">
               </instanceof>
               <iterate
                     ifEmpty="false"
                     operator="and">
                  <instanceof
                        value="de.walware.statet.r.core.model.IRLangElement">
                  </instanceof>
               </iterate>
            </with>
            <with
                  variable="activePartId">
               <equals
                     value="de.walware.statet.r.editors.R">
               </equals>
            </with>
         </or>
      </definition>
   </extension>
   <extension
         point="org.eclipse.ui.actionSetPartAssociations">
      <actionSetPartAssociation
            targetID="de.walware.ecommons.ltk.contexts.EditSourceActionSet">
         <part
               id="de.walware.statet.r.editors.R">
         </part>
      </actionSetPartAssociation>
   </extension>
   <extension
         point="org.eclipse.ui.contexts">
      <context
            id="de.walware.statet.r.contexts.REditor"
            parentId="de.walware.ecommons.text.contexts.TextEditor"
            name="%categorys.RSource.name"
            description="%categorys.RSource.description">
      </context>
   </extension>
   
   <extension
         point="org.eclipse.ui.handlers">
      <!-- navigate -->
      <handler
            commandId="org.eclipse.jdt.ui.edit.text.java.open.editor"
            class="de.walware.statet.r.ui.sourceediting.ROpenDeclarationHandler">
         <activeWhen>
            <with variable="activePartId">
               <equals
                     value="de.walware.statet.r.editors.R">
               </equals>
            </with>
         </activeWhen>
      </handler>
      
      <!-- search -->
      <handler
            commandId="de.walware.ecommons.ltk.commands.SearchAllElementAccess"
            class="de.walware.statet.r.ui.editors.RElementSearchHandler">
         <activeWhen>
            <with variable="activePartId">
               <equals
                     value="de.walware.statet.r.editors.R">
               </equals>
            </with>
         </activeWhen>
      </handler>
      <handler
            commandId="de.walware.ecommons.ltk.commands.SearchWriteElementAccess"
            class="de.walware.statet.r.ui.editors.RElementSearchHandler">
         <activeWhen>
            <with variable="activePartId">
               <equals
                     value="de.walware.statet.r.editors.R">
               </equals>
            </with>
         </activeWhen>
      </handler>
   </extension>
   
   <extension
         point="org.eclipse.ui.menus">
      <!-- source -->
      <menuContribution
            locationURI="menu:de.walware.statet.base.menus.MainStatSource?after=comment.add">
         <command
               commandId="de.walware.ecommons.ltk.commands.GenerateElementComment"
               mnemonic="%menus_Source_GenerateElementComment_mnemonic"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="de.walware.statet.r.expressions.RSourceElement">
               </reference>
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            locationURI="menu:de.walware.statet.base.menus.MainStatSource?after=comment.add">
         <command
               commandId="de.walware.ecommons.ltk.commands.StripComments"
               mnemonic="%menus_Source_StripComments_mnemonic"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="de.walware.statet.r.expressions.RSourceElement">
               </reference>
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            locationURI="menu:de.walware.statet.base.menus.MainStatSource?after=additions">
         <separator
               name="refactor"
               visible="true">
         </separator>
         <command
               commandId="de.walware.ecommons.ltk.commands.RefactorRenameInWorkspace"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="de.walware.statet.r.expressions.RSourceElement">
               </reference>
            </visibleWhen>
         </command>
         <command
               commandId="de.walware.ecommons.ltk.commands.RefactorRenameInSelectedRegion"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="de.walware.statet.r.expressions.RSourceElement">
               </reference>
            </visibleWhen>
         </command>
         <command
               commandId="de.walware.ecommons.ltk.commands.RefactorInlineLocalVariable"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="de.walware.statet.r.expressions.RSourceElement">
               </reference>
            </visibleWhen>
         </command>
         <command
               commandId="de.walware.ecommons.ltk.commands.RefactorExtractLocalVariable"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="de.walware.statet.r.expressions.RSourceElement">
               </reference>
            </visibleWhen>
         </command>
         <separator
               name="refactor.methods"
               visible="true">
         </separator>
         <command
               commandId="de.walware.statet.base.r.RefactorExtractFunction"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="de.walware.statet.r.expressions.RSourceElement">
               </reference>
            </visibleWhen>
         </command>
         <command
               commandId="de.walware.statet.base.r.RefactorFunctionToS4Method"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="de.walware.statet.r.expressions.RSourceElement">
               </reference>
            </visibleWhen>
         </command>
         <separator
               name="refactoring.add"
               visible="false">
         </separator>
      </menuContribution>
      
      <!-- navigate -->
      <menuContribution
            locationURI="menu:navigate?after=open.ext">
         <command
               commandId="org.eclipse.ui.edit.text.open.hyperlink"
               mnemonic="%menus_Navigate_OpenHyperlink_mnemonic"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <with variable="activePartId">
                  <equals
                        value="de.walware.statet.r.editors.R">
                  </equals>
               </with>
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            locationURI="menu:navigate?endof=show.ext">
         <command
               commandId="de.walware.ecommons.ltk.commands.ShowQuickSourceOutline"
               mnemonic="%menus_Navigate_ShowQuickOutline_mnemonic"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <with variable="activePartId">
                  <equals
                        value="de.walware.statet.r.editors.R">
                  </equals>
               </with>
            </visibleWhen>
         </command>
      </menuContribution>
      
      <!-- search -->
      <menuContribution
            locationURI="menu:org.eclipse.search.menu?endof=contextMenuActionsGroup">
         <menu
               id="de.walware.statet.r.menus.RSearchAllAccess"
               label="%menus_Search_AllAccess_name"
               mnemonic="%menus_Search_AllAccess_mnemonic">
            <dynamic
                  id="de.walware.ecommons.ltk.commands.SearchAllElementAccess"
                  class="de.walware.statet.r.ui.editors.RElementSearchContributionItem$All">
            </dynamic>
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="activePartId">
                  <equals
                        value="de.walware.statet.r.editors.R">
                  </equals>
               </with>
            </visibleWhen>
         </menu>
         <menu
               id="de.walware.statet.r.menus.RSearchWriteAccess"
               label="%menus_Search_WriteAccess_name"
               mnemonic="%menus_Search_WriteAccess_mnemonic">
            <dynamic
                  id="de.walware.ecommons.ltk.commands.SearchWriteElementAccess"
                  class="de.walware.statet.r.ui.editors.RElementSearchContributionItem$Write">
            </dynamic>
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="activePartId">
                  <equals
                        value="de.walware.statet.r.editors.R">
                  </equals>
               </with>
            </visibleWhen>
         </menu>
      </menuContribution>
      
      <!-- context -->
      <menuContribution
            locationURI="popup:de.walware.statet.r.menus.REditorContextMenu?after=group.edit">
         <command
               commandId="de.walware.ecommons.ltk.commands.ToggleComment"
               id="de.walware.ecommons.ltk.commands.ToggleComment"
               mnemonic="%menus_REditorContext_ToggleComment_mnemonic"
               style="push">
         </command>
         <command
               commandId="de.walware.ecommons.ltk.commands.CorrectIndent"
               id="de.walware.ecommons.ltk.commands.CorrectIndent"
               mnemonic="%menus_REditorContext_CorrectIndent_mnemonic"
               style="push">
         </command>
      </menuContribution>
      <menuContribution
            locationURI="popup:de.walware.statet.r.menus.REditorContextMenu?endof=search">
         <menu
               id="de.walware.statet.r.menus.SearchAllAccess"
               label="%menus_Search_AllAccess_name"
               mnemonic="%menus_Search_AllAccess_mnemonic">
            <dynamic
                  id="de.walware.ecommons.ltk.commands.SearchAllElementAccess"
                  class="de.walware.statet.r.ui.editors.RElementSearchContributionItem$All">
            </dynamic>
         </menu>
         <menu
               id="de.walware.statet.r.menus.SearchWriteAccess"
               label="%menus_Search_WriteAccess_name"
               mnemonic="%menus_Search_WriteAccess_mnemonic">
            <dynamic
                  id="de.walware.ecommons.ltk.commands.SearchWriteElementAccess"
                  class="de.walware.statet.r.ui.editors.RElementSearchContributionItem$Write">
            </dynamic>
         </menu>
      </menuContribution>
   </extension>
   
   <extension
         point="org.eclipse.ui.popupMenus">
      <viewerContribution
            id="de.walware.statet.r.legacy.REditorRulerMenuCommonContribution"
            targetID="de.walware.statet.r.menus.REditorRulerMenu">
         <action
               id=".AddTask"
               class="org.eclipse.ui.texteditor.TaskRulerAction"
               label="AddTask"
               menubarPath="add"
               helpContextId="org.eclipse.ui.AddTask_action_context">
         </action>
         <action
               id=".AddBookmark"
               class="org.eclipse.ui.texteditor.BookmarkRulerAction"
               label="AddBookmark"
               menubarPath="add"
               helpContextId="org.eclipse.ui.bookmark_action_context">
         </action>
      </viewerContribution>
   </extension>

   <extension
         point="org.eclipse.ui.commands">
      <command
            id="de.walware.statet.base.r.RefactorExtractFunction"
            categoryId="de.walware.statet.base.commandCategorys.StatetSource"
            name="%commands_RefactorExtractFunction_name"
            description="%commands_RefactorExtractFunction_description"/>
      <command
            id="de.walware.statet.base.r.RefactorFunctionToS4Method"
            categoryId="de.walware.statet.base.commandCategorys.StatetSource"
            name="%commands_RefactorFunctionToS4Method_name"
            description="%commands_RefactorFunctionToS4Method_description"/>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            commandId="org.eclipse.jdt.ui.edit.text.java.toggleMarkOccurrences"
            class="de.walware.statet.r.internal.ui.editors.RToggleMarkOccurrencesHandler">
         <activeWhen>
            <with variable="activePartId">
               <equals
                     value="de.walware.statet.r.editors.R">
               </equals>
            </with>
         </activeWhen>
      </handler>
      <handler
            commandId="org.eclipse.ui.edit.text.folding.toggle"
            class="de.walware.statet.r.internal.ui.editors.RToggleFoldingHandler">
         <activeWhen>
            <with variable="activePartId">
               <equals
                     value="de.walware.statet.r.editors.R">
               </equals>
            </with>
         </activeWhen>
      </handler>
      <handler
            commandId="de.walware.ecommons.ltk.commands.ToggleLiveReportProblems"
            class="de.walware.statet.r.internal.ui.editors.RToggleLiveReportProblemsHandler">
         <activeWhen>
            <with variable="activePartId">
               <equals
                     value="de.walware.statet.r.editors.R">
               </equals>
            </with>
         </activeWhen>
      </handler>
      
      <handler
            class="de.walware.statet.r.internal.ui.editors.GenerateRoxygenElementComment"
            commandId="de.walware.ecommons.ltk.commands.GenerateElementComment">
         <activeWhen>
            <reference
                  definitionId="de.walware.statet.r.expressions.RSourceElement">
            </reference>
         </activeWhen>
         <enabledWhen>
            <with variable="selection">
               <or>
                  <instanceof
                        value="org.eclipse.jface.text.ITextSelection">
                  </instanceof>
                  <test
                        args="1280,1024"
                        forcePluginActivation="true"
                        property="de.walware.ecommons.ltk.isElementC1TypeSelection"
                        value="r">
                  </test>
               </or>
            </with>
         </enabledWhen>
      </handler>

      <handler
            commandId="de.walware.ecommons.ltk.commands.RefactorRenameInWorkspace"
            class="de.walware.statet.r.internal.ui.refactoring.RenameInWorkspaceHandler">
         <activeWhen>
            <with variable="activePartId">
               <equals
                     value="de.walware.statet.r.editors.R">
               </equals>
            </with>
         </activeWhen>
      </handler>
      <handler
            commandId="de.walware.ecommons.ltk.commands.RefactorRenameInSelectedRegion"
            class="de.walware.statet.r.internal.ui.refactoring.RenameInRegionHandler">
         <activeWhen>
            <with variable="activePartId">
               <equals
                     value="de.walware.statet.r.editors.R">
               </equals>
            </with>
         </activeWhen>
      </handler>
      <handler
            commandId="de.walware.ecommons.ltk.commands.RefactorInlineLocalVariable"
            class="de.walware.statet.r.internal.ui.refactoring.InlineTempHandler">
         <activeWhen>
            <with variable="activePartId">
               <equals
                     value="de.walware.statet.r.editors.R">
               </equals>
            </with>
         </activeWhen>
      </handler>
      <handler
            commandId="de.walware.ecommons.ltk.commands.RefactorExtractLocalVariable"
            class="de.walware.statet.r.internal.ui.refactoring.ExtractTempHandler">
         <activeWhen>
            <with variable="activePartId">
               <equals
                     value="de.walware.statet.r.editors.R">
               </equals>
            </with>
         </activeWhen>
      </handler>
      <handler
            commandId="de.walware.statet.base.r.RefactorExtractFunction"
            class="de.walware.statet.r.internal.ui.refactoring.ExtractFunctionHandler">
         <activeWhen>
            <with variable="activePartId">
               <equals
                     value="de.walware.statet.r.editors.R">
               </equals>
            </with>
         </activeWhen>
      </handler>
      <handler
            commandId="de.walware.statet.base.r.RefactorFunctionToS4Method"
            class="de.walware.statet.r.internal.ui.refactoring.FunctionToS4MethodHandler">
         <activeWhen>
            <with variable="activePartId">
               <equals
                     value="de.walware.statet.r.editors.R">
               </equals>
            </with>
         </activeWhen>
      </handler>
   </extension>

   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            id="de.walware.statet.r.preferencePages.RCodeStyle"
            category="de.walware.statet.base.preferencePages.StatetBase"
            name="%preferencePages.RCodeStyle.name"
            class="de.walware.statet.r.internal.ui.preferences.RCodeStylePreferencePage">
         <keywordReference id="de.walware.ecommons.ltk.keywords.SourceAppearance"/>
         <keywordReference id="de.walware.ecommons.ltk.keywords.SourceFormatting"/>
      </page>
      <page
            id="de.walware.statet.r.preferencePages.REditorOptions"
            category="de.walware.statet.base.preferencePages.Editors"
            name="%preferencePages.REditorOptions.name"
            class="de.walware.statet.r.internal.ui.preferences.REditorPreferencePage">
         <keywordReference id="de.walware.ecommons.ltk.keywords.SourceEditor"/>
         <keywordReference id="de.walware.ecommons.ltk.keywords.SourceAppearance"/>
         <keywordReference id="de.walware.ecommons.ltk.keywords.SourceFormatting"/>
         <keywordReference id="de.walware.ecommons.ltk.keywords.SpellChecking"/>
         <keywordReference id="de.walware.ecommons.ltk.keywords.AutoBracket"/>
         <keywordReference id="de.walware.ecommons.ltk.keywords.AutoIndent"/>
      </page>
      <page
            id="de.walware.statet.r.preferencePages.RTextStyles"
            category="de.walware.statet.base.preferencePages.Editors"
            name="%preferencePages.RSyntaxColoring.name"
            class="de.walware.statet.r.internal.ui.preferences.RTextStylesPreferencePage">
         <keywordReference id="de.walware.ecommons.ltk.keywords.SourceEditor"/>
         <keywordReference id="de.walware.ecommons.ltk.keywords.SourceAppearance"/>
      </page>
      <page
            id="de.walware.statet.r.preferencePages.RIdentifierGroupsPage"
            category="de.walware.statet.r.preferencePages.RTextStyles"
            name="%preferencePages.RIdentifierGroups.name"
            class="de.walware.statet.r.internal.ui.preferences.RIdentifiersPreferencePage">
         <keywordReference id="de.walware.ecommons.ltk.keywords.SourceEditor"/>
         <keywordReference id="de.walware.ecommons.ltk.keywords.SourceAppearance"/>
      </page>
      <page
            id="de.walware.statet.r.preferencePages.REditorTemplates"
            category="de.walware.statet.base.preferencePages.Editors"
            name="%preferencePages.REditorTemplates.name"
            class="de.walware.statet.r.internal.ui.preferences.REditorTemplatePreferencePage">
         <keywordReference id="de.walware.ecommons.ltk.keywords.SourceEditor"/>
         <keywordReference id="de.walware.ecommons.ltk.keywords.SourceTemplates"/>
      </page>
      <page
            id="de.walware.statet.r.preferencePages.REditorAdvancedContentAssistPage"
            category="de.walware.statet.base.preferencePages.Editors"
            name="R Editor Content Assist"
            class="de.walware.statet.r.internal.ui.editors.AdvancedContentAssistConfigurationPage">
         <keywordReference id="de.walware.ecommons.ltk.keywords.SourceEditor"/>
         <keywordReference id="de.walware.ecommons.ltk.keywords.SourceContentAssist"/>
      </page>
      <page
            id="de.walware.statet.r.preferencePages.REditorAdvancedInfoHoverPage"
            category="de.walware.statet.base.preferencePages.Editors"
            name="R Editor Hover"
            class="de.walware.statet.r.internal.ui.editors.AdvancedInfoHoverConfigurationPage$ForREditor">
      </page>
      <page
            id="de.walware.statet.r.preferencePages.RdTextStylesPage"
            category="de.walware.statet.base.preferencePages.Editors"
            name="%preferencePages.RdSyntaxColoring.name"
            class="de.walware.statet.r.internal.ui.preferences.RdSyntaxColoringPreferencePage">
         <keywordReference id="de.walware.ecommons.ltk.keywords.SourceEditor"/>
         <keywordReference id="de.walware.ecommons.ltk.keywords.SourceAppearance"/>
      </page>
   </extension>
   <extension
         point="org.eclipse.ui.propertyPages">
      <page
            id="de.walware.statet.r.propertyPages.RProject"
            name="%propertyPages_RProject_name"
            class="de.walware.statet.r.internal.ui.RProjectPropertyPage">
         <filter
               name="nature"
               value="de.walware.statet.r.RNature">
         </filter>
         <enabledWhen>
            <instanceof
                  value="org.eclipse.core.resources.IProject">
            </instanceof>
         </enabledWhen>
      </page>
      <page
            id="de.walware.statet.r.propertyPages.RCodeStyle"
            class="de.walware.statet.r.internal.ui.preferences.RCodeStylePreferencePage"
            name="%propertyPages_RCodeStyle_name">
         <filter
               name="nature"
               value="de.walware.statet.r.RNature">
         </filter>
         <enabledWhen>
            <instanceof
                  value="org.eclipse.core.resources.IProject">
            </instanceof>
         </enabledWhen>
      </page>
   </extension>

   <extension
         point="de.walware.statet.base.ui.codeGenerationTemplatesCategory">
      <category
            id="de.walware.statet.r.codegenerationCategory.RCodeTemplates"
            name="%templatesCategory.RCodeTemplates.name"
            providerClass="de.walware.statet.r.internal.ui.preferences.RCodeTemplatesProvider"/>
      <category
            id="de.walware.statet.r.codegenerationCategory.RdCodeTemplates"
            name="%templatesCategory.RdCodeTemplates.name"
            providerClass="de.walware.statet.r.internal.ui.preferences.RdCodeTemplatesProvider"/>
   </extension>

   <extension
         point="org.eclipse.ui.editors.annotationTypes">
      <type
         name="de.walware.statet.r.ui.error"
         super="org.eclipse.ui.workbench.texteditor.error"
         markerSeverity="2">
      </type>
      <type
         name="de.walware.statet.r.ui.warning"
         super="org.eclipse.ui.workbench.texteditor.warning"
         markerSeverity="1">
      </type>
      <type
         name="de.walware.statet.r.ui.info"
         super="org.eclipse.ui.workbench.texteditor.info"
         markerSeverity="0">
      </type>
   </extension>

   <extension
         point="org.eclipse.ui.newWizards">
      <category
            id="de.walware.statet.r.newWizards.RCategory"
            name="StatET: R"/>
      <wizard
            id="de.walware.statet.r.newWizards.RProjectCreation"
            category="de.walware.statet.r.newWizards.RCategory"
            class="de.walware.statet.r.internal.ui.wizards.NewRProjectWizard"
            icon="icons/tool_16/new-r_project.png"
            name="%wizards_NewRProject_name"
            project="true"
            finalPerspective="de.walware.statet.base.perspectives.StatetPerspective">
         <description>
            %wizards_NewRProject_description
         </description>
      </wizard>
      <wizard
            id="de.walware.statet.r.newWizards.RPkgProjectCreation"
            category="de.walware.statet.r.newWizards.RCategory"
            class="de.walware.statet.r.internal.ui.wizards.NewRPkgProjectWizard"
            icon="icons/tool_16/new-rpkg_project.png"
            name="%wizards_NewRPackageProject_name"
            project="true"
            finalPerspective="de.walware.statet.base.perspectives.StatetPerspective">
         <description>
            %wizards_NewRPackageProject_description
         </description>
      </wizard>
      <wizard
            category="de.walware.statet.r.newWizards.RCategory"
            class="de.walware.statet.r.internal.ui.wizards.NewRFileCreationWizard"
            icon="icons/tool_16/new_r-file.gif"
            id="de.walware.statet.r.newWizards.RFileCreation"
            name="%wizards.NewRFile.name"
            project="false">
         <description>
            %wizards.NewRFile.description
         </description>
      </wizard>
      <wizard
            category="de.walware.statet.r.newWizards.RCategory"
            class="de.walware.statet.r.internal.ui.wizards.NewRdFileCreationWizard"
            icon="icons/tool_16/new_rd-file.gif"
            id="de.walware.statet.r.newWizards.RdFileCreation"
            name="%wizards.NewRdFile.name"
            project="false">
         <description>
            %wizards.NewRdFile.description
         </description>
      </wizard>
   </extension>
   <extension
         point="org.eclipse.ui.navigator.navigatorContent">
      <commonWizard
            menuGroupId="de.walware.statet"
            type="new"
            wizardId="de.walware.statet.r.newWizards.RFileCreation">
         <enablement>
            <or>
               <adapt
                     type="org.eclipse.core.resources.IContainer">
                  <test
                        property="org.eclipse.core.resources.projectNature"
                        value="de.walware.statet.r.RNature">
                  </test>
               </adapt>
            </or></enablement>
      </commonWizard>
      <commonWizard
            menuGroupId="de.walware.statet"
            type="new"
            wizardId="de.walware.statet.r.newWizards.RdFileCreation">
         <enablement>
            <or>
               <adapt
                     type="org.eclipse.core.resources.IProject">
                  <test
                        property="org.eclipse.core.resources.projectNature"
                        value="de.walware.statet.r.RPkgNature">
                  </test>
               </adapt>
            </or>
         </enablement>
      </commonWizard>
   </extension>
   <extension
         point="org.eclipse.ui.perspectiveExtensions">
      <perspectiveExtension targetID="de.walware.statet.base.perspectives.StatetPerspective">
         <newWizardShortcut id="de.walware.statet.r.newWizards.RProjectCreation"/>
         <newWizardShortcut id="de.walware.statet.r.newWizards.RPkgProjectCreation"/>
         <newWizardShortcut id="de.walware.statet.r.newWizards.RFileCreation"/>
         <actionSet id="de.walware.statet.r.actionSets.RToolbarSet"/>
         <view
               id="de.walware.statet.r.views.RHelp"
               minimized="true"
               relationship="stack"
               relative="de.walware.statet.nico.views.ObjectBrowser"
               visible="true">
         </view>
      </perspectiveExtension>
   </extension>
   
   <extension
         point="org.eclipse.compare.contentViewers">
      <viewer
            class="de.walware.statet.r.internal.ui.compare.RTextViewerCreator"
            id="de.walware.statet.r.compareContentViewer.R">
      </viewer>
      <contentTypeBinding
            contentTypeId="de.walware.statet.r.contentTypes.R"
            contentViewerId="de.walware.statet.r.compareContentViewer.R">
      </contentTypeBinding>
      <viewer
            class="de.walware.statet.r.internal.ui.compare.RdTextViewerCreator"
            id="de.walware.statet.r.compareContentViewer.Rd">
      </viewer>
      <contentTypeBinding
            contentTypeId="de.walware.statet.r.contentTypes.Rd"
            contentViewerId="de.walware.statet.r.compareContentViewer.Rd">
      </contentTypeBinding>
   </extension>
   <extension
         point="org.eclipse.compare.contentMergeViewers">
      <viewer
            id="de.walware.statet.r.compareContentMergeViewer.R"
            class="de.walware.statet.r.internal.ui.compare.RMergeViewerCreator"
            extensions="R">
      </viewer>
      <contentTypeBinding
            contentMergeViewerId="de.walware.statet.r.compareContentMergeViewer.R"
            contentTypeId="de.walware.statet.r.contentTypes.R">
      </contentTypeBinding>
      <viewer
            id="de.walware.statet.r.compareContentMergeViewer.Rd"
            class="de.walware.statet.r.internal.ui.compare.RdMergeViewerCreator"
            extensions="Rd">
      </viewer>
      <contentTypeBinding
            contentMergeViewerId="de.walware.statet.r.compareContentMergeViewer.Rd"
            contentTypeId="de.walware.statet.r.contentTypes.Rd">
      </contentTypeBinding>
   </extension>
   <extension
         point="org.eclipse.search.searchResultViewPages">
      <viewPage
            id="de.walware.statet.r.searchResults.RElementViewPage"
            searchResultClass="de.walware.statet.r.internal.ui.search.RElementSearchResult"
            class="de.walware.statet.r.internal.ui.search.RElementSearchResultPage">
      </viewPage>
   </extension>

   <!-- R Help -->
   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            id="de.walware.statet.r.preferencePages.RHelpPage"
            category="de.walware.statet.base.preferencePages.StatetBase"
            name="%preferencePages_RHelpPage_name"
            class="de.walware.statet.r.internal.ui.rhelp.RHelpPreferencePage">
      </page>
   </extension>
   <extension
         point="org.eclipse.ui.views">
      <view
            id="de.walware.statet.r.views.RHelp"
            category="de.walware.statet.base.views.StatetCategory"
            class="de.walware.statet.r.internal.ui.rhelp.RHelpView"
            name="%views_RHelpView_name"
            icon="icons/obj_16/rhelp.png"
            restorable="true" allowMultiple="true">
      </view>
   </extension>
   <extension
         point="org.eclipse.equinox.http.registry.httpcontexts">
      <httpcontext
            id="rhelp">
      </httpcontext>
   </extension>
   <extension
         point="org.eclipse.equinox.http.registry.servlets">
      <servlet
            alias="/browse"
            httpcontextId="rhelp"
            class="de.walware.statet.r.internal.ui.rhelp.RHelpUIServlet$Browse">
      </servlet>
      <servlet
            alias="/info"
            httpcontextId="rhelp"
            class="de.walware.statet.r.internal.ui.rhelp.RHelpUIServlet$Info">
      </servlet>
      <servlet
            alias="/exec"
            httpcontextId="rhelp"
            class="de.walware.statet.r.internal.ui.rhelp.ExecServlet">
      </servlet>
   </extension>
   <extension
         point="org.eclipse.search.searchPages">
      <page
            class="de.walware.statet.r.internal.ui.rhelp.RHelpSearchInputPage"
            extensions="R:85, Rd:85"
            icon="icons/tool_16/rhelp-search.png"
            id="de.walware.statet.r.searchPages.RHelpPage"
            label="%searchPages.RHelpPage"
            searchViewHelpContextId="de.walware.statet.r.ui.r_help-search_page"
            showScopeSection="false">
      </page>
   </extension>
   <extension
         point="org.eclipse.search.searchResultViewPages">
      <viewPage
            id="de.walware.statet.r.searchResults.RHelpViewPage"
            searchResultClass="de.walware.statet.r.internal.ui.rhelp.RHelpSearchResult"
            class="de.walware.statet.r.internal.ui.rhelp.RHelpSearchResultPage">
      </viewPage>
   </extension>
   <extension
         point="org.eclipse.help.ui.searchEngine">
      <engine
            enabled="true"
            engineTypeId="org.eclipse.help.ui.web"
            id="de.walware.statet.r.searchEngine.RSiteSearch"
            label="%searchEngine.RSiteSearch.label">
         <param
               name="url"
               value="http://search.r-project.org/cgi-bin/namazu.cgi?query={expression}&amp;max=20&amp;result=normal&amp;sort=score&amp;idxname=functions&amp;idxname=docs"/>
         <description>
            %searchEngine.RSiteSearch.description
         </description>
      </engine>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            categoryId="de.walware.statet.base.commandCategorys.StatetSource"
            defaultHandler="de.walware.statet.r.internal.ui.rtools.RunHelpInR"
            description="%commands.RunHelpInR.description"
            id="de.walware.statet.r.ui.commands.RunHelpInR"
            name="%commands.RunHelpInR.name">
         <commandParameter
               id="topic"
               name="Help Topic"
               optional="true">
         </commandParameter>
      </command>
      <command
            categoryId="de.walware.statet.base.commandCategorys.StatetSource"
            defaultHandler="de.walware.statet.r.internal.ui.rtools.RunHelpSearchInR"
            description="%commands.RunHelpSearchInR.description"
            id="de.walware.statet.r.ui.commands.RunHelpSearchInR"
            name="%commands.RunHelpSearchInR.name">
         <commandParameter
               id="text"
               name="Text to Search For"
               optional="true">
         </commandParameter>
      </command>
      <command
            categoryId="de.walware.statet.base.commandCategorys.StatetSource"
            defaultHandler="de.walware.statet.r.internal.ui.rtools.RunPrintInR"
            description="%commands.RunPrintInR.description"
            id="de.walware.statet.r.ui.commands.RunPrintInR"
            name="%commands.RunPrintInR.name">
         <commandParameter
               id="var"
               name="Variable to Print"
               optional="true">
         </commandParameter>
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="de.walware.statet.r.ui.commands.RunHelpInR"
            contextId="de.walware.statet.r.contexts.REditor"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+R 1">
      </key>
      <key
            commandId="de.walware.statet.r.ui.commands.RunHelpSearchInR"
            contextId="de.walware.statet.r.contexts.REditor"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+R M2+1">
      </key>
      <key
            commandId="de.walware.statet.r.ui.commands.RunPrintInR"
            contextId="de.walware.statet.r.contexts.REditor"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+R P">
      </key>
   </extension>
   
   <extension
         point="org.eclipse.core.expressions.propertyTesters">
      <propertyTester
            class="de.walware.statet.r.internal.debug.nostart.SupportFileCommandTester"
            id="de.walware.statet.r.propertyTester.Interaction"
            namespace="de.walware.statet.r"
            properties="supportsFileCommand"
            type="org.eclipse.core.runtime.IAdaptable">
      </propertyTester>
   </extension>
   
   <extension-point id="rCodeLaunchConnector"
         name="Point to register Connectors which can launch r code"
         schema="schema/rCodeLaunchConnector.exsd"/>
   <extension-point id="rCodeLaunchContentHandler"
         name="Content specific handling of code launching"
         schema="schema/rCodeLaunchContentHandler.exsd"/>
   
   <extension point="de.walware.statet.r.ui.rCodeLaunchContentHandler">
      <contentHandler
            contentTypeId="de.walware.statet.r.contentTypes.RData">
         <fileCommand
               defaultCommand="load(&quot;${resource_loc}&quot;)"
               id="de.walware.statet.r.rFileCommand.LoadRData"
               name="%rCodeLaunchHandler_LoadRData_label">
         </fileCommand>
      </contentHandler>
      <contentHandler
            contentTypeId="de.walware.statet.r.contentTypes.R"
            handler="de.walware.statet.r.internal.debug.ui.launcher.DefaultContentHandler">
         <fileCommand
               defaultCommand="source(&quot;${resource_loc}&quot;, echo=${echo}, encoding=&quot;${resource_encoding}&quot;)"
               id="de.walware.statet.r.rFileCommand.SourceRScript"
               name="%rCodeLaunchHandler_SourceRScript_label">
         </fileCommand>
      </contentHandler>
   </extension>
   
   <extension point="org.eclipse.debug.ui.launchShortcuts">
      <shortcut
            category="de.walware.statet.r.basic"
            class="de.walware.statet.r.internal.debug.ui.launcher.SubmitRScriptViaSourceShortcut"
            icon="icons/tool_16/run-r-script-source.png"
            id="de.walware.statet.r.launchShortcuts.SourceRScript"
            label="%launchShortcuts_RunRScriptViaSource_label"
            modes="run"
            path="statet/r/5">
         <enablement>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate
                     ifEmpty="false"
                     operator="and">
                  <test
                        forcePluginActivation="true"
                        property="de.walware.ecommons.ltk.matchesContentType"
                        value="de.walware.statet.r.contentTypes.R">
                  </test>
               </iterate>
            </with>
         </enablement>
         <contextualLaunch>
            <enablement>
               <with
                     variable="selection">
                  <count
                        value="1">
                  </count>
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <test
                           forcePluginActivation="true"
                           property="de.walware.ecommons.ltk.matchesContentType"
                           value="de.walware.statet.r.contentTypes.R">
                     </test>
                  </iterate>
               </with>
            </enablement>
            <contextLabel
                  label="%launchShortcuts_RunRScriptViaSource_label"
                  mode="run"/>
         </contextualLaunch>
      </shortcut>
      <shortcut
            category="de.walware.statet.r.basic"
            class="de.walware.statet.r.internal.debug.ui.launcher.SubmitRDataViaLoadShortcut"
            icon="icons/tool_16/run-r-script-source.png"
            id="de.walware.statet.r.launchShortcuts.LoadRData"
            label="%launchShortcuts_RunRDataViaLoad_label"
            modes="run"
            path="statet/r/5">
         <enablement>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <or>
                     <test
                           forcePluginActivation="true"
                           property="de.walware.ecommons.ltk.matchesActivatedContentType"
                           value="de.walware.statet.r.contentTypes.RData">
                     </test>
                  </or>
               </iterate>
            </with>
         </enablement>
         <contextualLaunch>
            <enablement>
               <with
                     variable="selection">
                  <count
                        value="1">
                  </count>
                  <iterate>
                     <test
                           forcePluginActivation="true"
                           property="de.walware.ecommons.ltk.matchesActivatedContentType"
                           value="de.walware.statet.r.contentTypes.RData">
                     </test>
                  </iterate>
               </with>
            </enablement>
            <contextLabel
                  label="%launchShortcuts_RunRDataViaLoad_label"
                  mode="run">
            </contextLabel>
         </contextualLaunch>
      </shortcut>
      <shortcut
            category="de.walware.statet.r.basic"
            class="de.walware.statet.r.internal.debug.ui.launcher.SubmitFileDirectLaunchShortcut"
            icon="icons/tool_16/run-r-script.png"
            id="de.walware.statet.r.launchShortcuts.RScriptDirect"
            label="%launchShortcuts_RunRScriptDirect_label"
            modes="run"
            path="statet/r/5">
         <enablement>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate
                     ifEmpty="false"
                     operator="and">
                  <test
                        forcePluginActivation="true"
                        property="de.walware.ecommons.ltk.matchesActivatedContentType"
                        value="de.walware.statet.r.contentTypes.R">
                  </test>
               </iterate>
            </with>
         </enablement>
         <contextualLaunch>
            <enablement>
               <with
                     variable="selection">
                  <count
                        value="1">
                  </count>
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <test
                           forcePluginActivation="true"
                           property="de.walware.ecommons.ltk.matchesActivatedContentType"
                           value="de.walware.statet.r.contentTypes.R">
                     </test>
                  </iterate>
               </with>
            </enablement>
            <contextLabel
                  label="%launchShortcuts_RunRScriptDirect_label"
                  mode="run">
            </contextLabel>
         </contextualLaunch>
      </shortcut>
      <shortcut
            category="de.walware.statet.r.other"
            class="de.walware.statet.r.internal.debug.ui.launcher.SubmitFileDirectAndConsoleLaunchShortcut"
            icon="icons/tool_16/run-r-script.png"
            id="de.walware.statet.r.launchShortcuts.RScriptDirectAndConsole"
            label="%launchShortcuts_RunRScriptDirectAndGotoConsole_label"
            modes="run"
            path="statet/r/5">
         <enablement>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate
                     ifEmpty="false"
                     operator="and">
                  <test
                        forcePluginActivation="true"
                        property="de.walware.ecommons.ltk.matchesActivatedContentType"
                        value="de.walware.statet.r.contentTypes.R">
                  </test>
               </iterate>
            </with>
         </enablement>
      </shortcut>
   </extension>
   <extension
         point="org.eclipse.ui.actionSets">
      <actionSet
            id="de.walware.statet.r.actionSets.RToolbarSet"
            label="%actionSets_RToolbar_label">
      </actionSet>
      <actionSet
            description="%actionSets_RToolbarExt1_description"
            id="de.walware.statet.r.actionSets.RToolbarExt1Set"
            label="%actionSets_RToolbarExt1_label">
      </actionSet>
      <actionSet
            id="de.walware.statet.r.actionSets.RSessionTools"
            label="%actionSets_RSessionTools_label">
      </actionSet>
      <actionSet
            id="de.walware.statet.r.actionSets.RMainMenu"
            label="%actionSets_RMainMenu_label">
      </actionSet>
   </extension>
   <extension
         point="org.eclipse.ui.actionSetPartAssociations">
      <actionSetPartAssociation
            targetID="de.walware.statet.r.actionSets.RToolbarSet">
         <part
               id="de.walware.statet.r.editors.R">
         </part>
      </actionSetPartAssociation>
   </extension>
   <extension
         point="org.eclipse.ui.perspectiveExtensions">
      <perspectiveExtension
            targetID="de.walware.statet.base.perspectives.StatetPerspective">
         <actionSet
               id="de.walware.statet.r.actionSets.RMainMenu">
         </actionSet>
      </perspectiveExtension>
   </extension>
   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            id="de.walware.statet.r.preferencePages.RInteractionPage"
            category="de.walware.statet.base.preferencePages.RunDebug"
            class="de.walware.statet.r.internal.debug.ui.preferences.RInteractionPreferencePage"
            name="%preferencePages_RInteraction_name"/>
      <page
            id="de.walware.statet.r.preferencePages.REnvironmentPage"
            category="de.walware.statet.base.preferencePages.RunDebug"
            class="de.walware.statet.r.internal.debug.ui.preferences.REnvPreferencePage"
            name="%preferencePages_REnvironments_name"/>
      <page
            id="de.walware.statet.r.preferencePages.RRepositories"
            category="de.walware.statet.base.preferencePages.RunDebug"
            class="de.walware.statet.r.internal.ui.pkgmanager.RRepoPreferencePage"
            name="%preferencePages_RRepositories_name"/>
   </extension>
   <extension point="org.eclipse.ui.commands">
      <!-- commands of launch shortcuts above -->
      <command
            id="de.walware.statet.r.launchShortcuts.RScriptViaSource.run"
            name="%commands_RunRScriptViaSource_name"
            categoryId="org.eclipse.debug.ui.category.run">
      </command>
      <command
            id="de.walware.statet.r.launchShortcuts.RScriptDirect.run"
            name="%commands_RunRScriptDirect_name"
            categoryId="org.eclipse.debug.ui.category.run">
      </command>
      <command
            id="de.walware.statet.r.launchShortcuts.RScriptDirectAndConsole.run"
            name="%commands_RunRScriptDirect_GotoConsole_name"
            categoryId="org.eclipse.debug.ui.category.run">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            id="de.walware.statet.r.commands.GotoRConsole"
            categoryId="org.eclipse.debug.ui.category.run"
            name="%commands_GotoRConsole_name"
            defaultHandler="de.walware.statet.r.internal.debug.ui.GotoRConsole"
            helpContextId="de.walware.statet.r.ui.run_in_r">
      </command>
      <command
            id="de.walware.statet.r.commands.SubmitSelectionToR"
            categoryId="org.eclipse.debug.ui.category.run"
            name="%commands_SubmitSelectionToR_name"
            description="%commands_SubmitSelectionToR_description"
            helpContextId="de.walware.statet.r.ui.run_in_r">
      </command>
      <command
            id="de.walware.statet.r.commands.SubmitSelectionToR_GotoConsole"
            categoryId="org.eclipse.debug.ui.category.run"
            name="%commands_SubmitSelectionToR_GotoConsole_name"
            description="%commands_SubmitSelectionToR_GotoConsole_description"
            helpContextId="de.walware.statet.r.ui.run_in_r">
      </command>
      <command
            id="de.walware.statet.r.commands.SubmitSelectionToR_GotoNextLine"
            categoryId="org.eclipse.debug.ui.category.run"
            name="%commands_SubmitSelectionToR_GotoNextLine_name"
            description="%commands_SubmitSelectionToR_GotoNextLine_description"
            helpContextId="de.walware.statet.r.ui.run_in_r">
      </command>
      <command
            id="de.walware.statet.r.commands.SubmitSelectionToR_PasteOutput"
            categoryId="org.eclipse.debug.ui.category.run"
            name="%commands_SubmitSelectionToR_PasteOutput_name"
            description="%commands_SubmitSelectionToR_PasteOutput_description"
            helpContextId="de.walware.statet.r.ui.run_in_r">
      </command>
      <command
            id="de.walware.statet.r.commands.SubmitUptoSelectionToR"
            categoryId="org.eclipse.debug.ui.category.run"
            name="%commands_SubmitUptoSelectionToR_name"
            description="%commands_SubmitUptoSelectionToR_description"
            helpContextId="de.walware.statet.r.ui.run_in_r">
      </command>
      <command
            id="de.walware.statet.r.commands.SubmitFileToRViaCommand"
            categoryId="org.eclipse.debug.ui.category.run"
            name="%commands_SubmitFileToRViaCommand_Default_name"
            description="%commands_SubmitFileToRViaCommand_Default_description"
            helpContextId="de.walware.statet.r.ui.run_in_r">
      </command>
      <command
            id="de.walware.statet.r.commands.SubmitFileToRViaCommand_GotoConsole"
            categoryId="org.eclipse.debug.ui.category.run"
            name="%commands_SubmitFileToRViaCommand_Default_GotoConsole_name"
            description="%commands_SubmitFileToRViaCommand_Default_GotoConsole_description"
            helpContextId="de.walware.statet.r.ui.run_in_r">
      </command>
      <command
            id="de.walware.statet.r.commands.SubmitEntireCommandToR"
            categoryId="org.eclipse.debug.ui.category.run"
            name="%commands_SubmitEntireCommandToR_name"
            description="%commands_SubmitEntireCommandToR_description"
            helpContextId="de.walware.statet.r.ui.run_in_r">
      </command>
      <command
            id="de.walware.statet.r.commands.SubmitEntireCommandToR_GotoConsole"
            categoryId="org.eclipse.debug.ui.category.run"
            name="%commands_SubmitEntireCommandToR_GotoConsole_name"
            description="%commands_SubmitEntireCommandToR_GotoConsole_description"
            helpContextId="de.walware.statet.r.ui.run_in_r">
      </command>
      <command
            id="de.walware.statet.r.commands.SubmitEntireCommandToR_GotoNextCommand"
            categoryId="org.eclipse.debug.ui.category.run"
            name="%commands_SubmitEntireCommandToR_GotoNextCommand_name"
            description="%commands_SubmitEntireCommandToR_GotoNextCommand_description"
            helpContextId="de.walware.statet.r.ui.run_in_r">
      </command>
      <command
            id="de.walware.statet.r.commands.SubmitFunctionDefToR"
            categoryId="org.eclipse.debug.ui.category.run"
            name="%commands_SubmitFunctionDefToR_name"
            description="%commands_SubmitFunctionDefToR_description"
            helpContextId="de.walware.statet.r.ui.run_in_r">
      </command>
      <command
            id="de.walware.statet.r.commands.SubmitFunctionDefToR_GotoConsole"
            categoryId="org.eclipse.debug.ui.category.run"
            name="%commands_SubmitFunctionDefToR_GotoConsole_name"
            description="%commands_SubmitFunctionDefToR_GotoConsole_description"
            helpContextId="de.walware.statet.r.ui.run_in_r">
      </command>
      <command
            id="de.walware.statet.r.commands.ToggleRunEcho"
            categoryId="org.eclipse.debug.ui.category.run"
            name="%commands_ToggleRunEcho_name"
            description="%commands_ToggleRunEcho_description"
            helpContextId="de.walware.statet.r.ui.run_in_r"
            defaultHandler="de.walware.statet.r.internal.debug.ui.launcher.ToggleRunEchoHandler">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.commandImages">
      <image
            commandId="de.walware.statet.r.commands.SubmitSelectionToR"
            icon="icons/tool_16/run-r-selection.png">
      </image>
      <image
            commandId="de.walware.statet.r.commands.SubmitSelectionToR_GotoConsole"
            icon="icons/tool_16/run-r-selection.png">
      </image>
      <image
            commandId="de.walware.statet.r.commands.SubmitSelectionToR_GotoNextLine"
            icon="icons/tool_16/run-r-selection-next.png">
      </image>
      <image
            commandId="de.walware.statet.r.commands.SubmitSelectionToR_PasteOutput"
            icon="icons/tool_16/run-r-selection-paste.png">
      </image>
      <image
            commandId="de.walware.statet.r.commands.SubmitFileToRViaCommand"
            icon="icons/tool_16/run-r-script-source.png">
      </image>
      <image
            commandId="de.walware.statet.r.commands.SubmitFileToRViaCommand_GotoConsole"
            icon="icons/tool_16/run-r-script-source.png">
      </image>
      <image
            commandId="de.walware.statet.r.commands.SubmitEntireCommandToR"
            icon="icons/tool_16/run-command.png">
      </image>
      <image
            commandId="de.walware.statet.r.commands.SubmitEntireCommandToR_GotoConsole"
            icon="icons/tool_16/run-command.png">
      </image>
      <image
            commandId="de.walware.statet.r.commands.SubmitEntireCommandToR_GotoNextCommand"
            icon="icons/tool_16/run-command-next.png">
      </image>
      <image
            commandId="de.walware.statet.r.commands.ToggleRunEcho"
            icon="icons/tool_16/echo.png">
      </image>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            commandId="de.walware.statet.r.commands.SubmitSelectionToR"
            class="de.walware.statet.r.internal.debug.ui.launcher.SubmitSelectionHandler">
         <activeWhen>
            <with variable="selection">
               <instanceof
                     value="org.eclipse.jface.viewers.IStructuredSelection">
               </instanceof>
               <or>
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <instanceof
                           value="de.walware.ecommons.ltk.ISourceStructElement">
                     </instanceof>
                  </iterate>
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <adapt
                           type="org.eclipse.core.resources.IFile">
                     </adapt>
                  </iterate>
               </or>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="de.walware.statet.r.internal.debug.ui.launcher.SubmitSelectionForTextHandler"
            commandId="de.walware.statet.r.commands.SubmitSelectionToR">
         <activeWhen>
            <with
                  variable="selection">
               <instanceof
                     value="org.eclipse.jface.text.ITextSelection">
               </instanceof>
            </with>
         </activeWhen>
      </handler>
      <handler
            commandId="de.walware.statet.r.commands.SubmitSelectionToR_GotoConsole"
            class="de.walware.statet.r.internal.debug.ui.launcher.SubmitSelectionAndGotoConsoleHandler">
         <activeWhen>
            <with variable="selection">
               <instanceof
                     value="org.eclipse.jface.viewers.IStructuredSelection">
               </instanceof>
               <or>
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <instanceof
                           value="de.walware.ecommons.ltk.ISourceStructElement">
                     </instanceof>
                  </iterate>
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <adapt
                           type="org.eclipse.core.resources.IFile">
                     </adapt>
                  </iterate>
               </or>
            </with>
         </activeWhen>
      </handler>
      <handler
            commandId="de.walware.statet.r.commands.SubmitSelectionToR_GotoConsole"
            class="de.walware.statet.r.internal.debug.ui.launcher.SubmitSelectionAndGotoConsoleForTextHandler">
         <activeWhen>
            <with
                  variable="selection">
               <instanceof
                     value="org.eclipse.jface.text.ITextSelection">
               </instanceof>
            </with>
         </activeWhen>
      </handler>
      <handler
            commandId="de.walware.statet.r.commands.SubmitSelectionToR_GotoNextLine"
            class="de.walware.statet.r.internal.debug.ui.launcher.SubmitSelectionAndGotoNextLineHandler">
         <activeWhen>
            <with
                  variable="selection">
               <instanceof
                     value="org.eclipse.jface.text.ITextSelection">
               </instanceof>
            </with></activeWhen>
      </handler>
      <handler
            commandId="de.walware.statet.r.commands.SubmitSelectionToR_PasteOutput"
            class="de.walware.statet.r.internal.debug.ui.launcher.SubmitSelectionAndPasteOutputHandler">
         <activeWhen>
            <and>
               <with
                     variable="selection">
                  <instanceof
                        value="org.eclipse.jface.text.ITextSelection">
                  </instanceof>
               </with>
               <with
                     variable="activePart">
                  <instanceof
                        value="de.walware.ecommons.ltk.ui.sourceediting.SourceEditor1">
                  </instanceof>
               </with>
               
            </and>
         </activeWhen>
      </handler>
      <handler
            commandId="de.walware.statet.r.commands.SubmitUptoSelectionToR"
            class="de.walware.statet.r.internal.debug.ui.launcher.SubmitUptoSelectionHandler">
         <activeWhen>
            <or>
               <with variable="selection">
                  <instanceof
                        value="org.eclipse.jface.text.ITextSelection">
                  </instanceof>
               </with>
               <with variable="selection">
                  <instanceof
                        value="org.eclipse.jface.viewers.IStructuredSelection">
                  </instanceof>
                  <count
                        value="1">
                  </count>
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <instanceof
                           value="de.walware.ecommons.ltk.ISourceStructElement">
                     </instanceof>
                  </iterate>
               </with>
            </or>
         </activeWhen>
      </handler>
      <handler
            commandId="de.walware.statet.r.commands.SubmitFileToRViaCommand"
            class="de.walware.statet.r.internal.debug.ui.launcher.SubmitFileViaCommandHandler">
         <activeWhen>
            <or>
               <with
                     variable="selection">
                  <instanceof
                        value="org.eclipse.jface.viewers.IStructuredSelection">
                  </instanceof>
                  <count
                        value="1">
                  </count>
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <or>
                        <test
                              forcePluginActivation="true"
                              property="de.walware.ecommons.ltk.matchesActivatedContentType"
                              value="org.eclipse.core.runtime.text">
                        </test>
                        <test
                              property="de.walware.statet.r.supportsFileCommand">
                        </test>
                     </or>
                  </iterate>
               </with>
               <with
                     variable="activePart">
                  <instanceof
                        value="org.eclipse.ui.IEditorPart">
                  </instanceof>
                  <test
                        forcePluginActivation="true"
                        property="de.walware.ecommons.ltk.matchesActivatedContentType"
                        value="org.eclipse.core.runtime.text">
                  </test>
               </with>
            </or>
         </activeWhen>
      </handler>
      <handler
            commandId="de.walware.statet.r.commands.SubmitFileToRViaCommand_GotoConsole"
            class="de.walware.statet.r.internal.debug.ui.launcher.SubmitFileViaCommandAndGotoConsoleHandler">
         <activeWhen>
            <or>
               <with
                     variable="selection">
                  <instanceof
                        value="org.eclipse.jface.viewers.IStructuredSelection">
                  </instanceof>
                  <count
                        value="1">
                  </count>
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <or>
                        <test
                              forcePluginActivation="true"
                              property="de.walware.ecommons.ltk.matchesActivatedContentType"
                              value="org.eclipse.core.runtime.text">
                        </test>
                        <test
                              property="de.walware.statet.r.supportsFileCommand">
                        </test>
                     </or>
                  </iterate>
               </with>
               <with
                     variable="activePart">
                  <instanceof
                        value="org.eclipse.ui.IEditorPart">
                  </instanceof>
                  <test
                        forcePluginActivation="true"
                        property="de.walware.ecommons.ltk.matchesActivatedContentType"
                        value="org.eclipse.core.runtime.text">
                  </test>
               </with>
            </or>
         </activeWhen>
      </handler>
      <handler
            commandId="de.walware.statet.r.commands.SubmitEntireCommandToR"
            class="de.walware.statet.r.internal.debug.ui.launcher.SubmitEntireCommandHandler">
         <activeWhen>
            <and>
               <with
                     variable="activePart">
                  <instanceof
                        value="org.eclipse.ui.texteditor.ITextEditor">
                  </instanceof>
                  <test
                        forcePluginActivation="true"
                        property="de.walware.ecommons.ltk.matchesActivatedContentType"
                        value="de.walware.statet.r.contentTypes.R">
                  </test>
               </with>
            </and>
         </activeWhen>
      </handler>
      <handler
            commandId="de.walware.statet.r.commands.SubmitEntireCommandToR_GotoConsole"
            class="de.walware.statet.r.internal.debug.ui.launcher.SubmitEntireCommandAndGotoConsoleHandler">
         <activeWhen>
            <and>
               <with
                     variable="activePart">
                  <instanceof
                        value="org.eclipse.ui.texteditor.ITextEditor">
                  </instanceof>
                  <test
                        forcePluginActivation="true"
                        property="de.walware.ecommons.ltk.matchesActivatedContentType"
                        value="de.walware.statet.r.contentTypes.R">
                  </test>
               </with>
            </and>
         </activeWhen>
      </handler>
      <handler
            commandId="de.walware.statet.r.commands.SubmitEntireCommandToR_GotoNextCommand"
            class="de.walware.statet.r.internal.debug.ui.launcher.SubmitEntireCommandAndGotoNextCommandHandler">
         <activeWhen>
            <and>
               <with
                     variable="activePart">
                  <instanceof
                        value="org.eclipse.ui.texteditor.ITextEditor">
                  </instanceof>
                  <test
                        forcePluginActivation="true"
                        property="de.walware.ecommons.ltk.matchesActivatedContentType"
                        value="de.walware.statet.r.contentTypes.R">
                  </test>
               </with>
            </and>
         </activeWhen>
      </handler>
      <handler
            commandId="de.walware.statet.r.commands.SubmitFunctionDefToR"
            class="de.walware.statet.r.internal.debug.ui.launcher.SubmitFunctionDefHandler">
         <activeWhen>
            <and>
               <with
                     variable="activePart">
                  <instanceof
                        value="org.eclipse.ui.texteditor.ITextEditor">
                  </instanceof>
                  <test
                        forcePluginActivation="true"
                        property="de.walware.ecommons.ltk.matchesActivatedContentType"
                        value="de.walware.statet.r.contentTypes.R">
                  </test>
               </with>
            </and>
         </activeWhen>
      </handler>
      <handler
            commandId="de.walware.statet.r.commands.SubmitFunctionDefToR_GotoConsole"
            class="de.walware.statet.r.internal.debug.ui.launcher.SubmitFunctionDefAndGotoConsoleHandler">
         <activeWhen>
            <and>
               <with
                     variable="activePart">
                  <instanceof
                        value="org.eclipse.ui.texteditor.ITextEditor">
                  </instanceof>
                  <test
                        forcePluginActivation="true"
                        property="de.walware.ecommons.ltk.matchesActivatedContentType"
                        value="de.walware.statet.r.contentTypes.R">
                  </test>
               </with>
            </and>
         </activeWhen>
      </handler>
   </extension>

   <extension
         point="de.walware.statet.r.ui.rCodeLaunchConnector">
      <connector
            class="de.walware.statet.r.internal.debug.ui.RControllerCodeLaunchConnector"
            description="%rConnector_RNewConsoleConnector_description"
            id="de.walware.statet.r.launching.RNewConsoleConnector"
            name="%rConnector_RNewConsoleConnector_name"/>
      <connector
            class="de.walware.statet.r.internal.debug.ui.TextConsoleConnector"
            description="%rConnector_EclipseTextConsole_description"
            id="de.walware.statet.r.rCodeLaunchConnector.EclipseTextConsole"
            name="%rConnector_EclipseTextConsole_name"/>
   </extension>
   
   <extension
         point="org.eclipse.ui.commands">
      <command
            id="de.walware.statet.r.commands.LoadRImage"
            categoryId="de.walware.statet.nico.commands.ConsoleCategory"
            name="%commands_LoadRImage_name"
            description="%commands_LoadRImage_description">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            commandId="de.walware.statet.r.commands.LoadRImage"
            class="de.walware.statet.r.internal.ui.tools.LoadRImageHandler">
         <enabledWhen>
            <with
                  variable="de.walware.statet.activeTool">
               <test
                     property="de.walware.statet.nico.isMainType"
                     value="R"
                     forcePluginActivation="false">
               </test>
            </with>
         </enabledWhen>
      </handler>
   </extension>
   
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="menu:org.eclipse.ui.main.menu?after=additions">
         <menu
               id="de.walware.statet.r.menus.RMain"
               label="R">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="activeContexts">
                  <iterate
                        ifEmpty="false"
                        operator="or">
                     <equals
                           value="de.walware.statet.r.actionSets.RMainMenu">
                     </equals>
                  </iterate>
               </with>
            </visibleWhen>
            <separator
                  name="r_runtime"
                  visible="true">
            </separator>
            <command
                  commandId="de.walware.statet.r.commands.LoadRImage">
            </command>
            <separator
                  name="r_tasks"
                  visible="true">
            </separator>
         </menu>
      </menuContribution>
   </extension>
   
   <extension
         point="org.eclipse.ui.views">
      <view
            allowMultiple="false"
            category="de.walware.statet.base.views.StatetCategory"
            class="de.walware.statet.r.internal.objectbrowser.ObjectBrowserView"
            icon="icons/view_16/objectbrowser.png"
            id="de.walware.statet.nico.views.ObjectBrowser"
            name="%views_RObjectBrowserView_name"
            restorable="true">
      </view>
   </extension>
   <extension
         point="org.eclipse.ui.contexts">
      <context
            id="de.walware.statet.r.contexts.RDataEditor"
            parentId="org.eclipse.ui.contexts.window"
            name="%contexts_RDataEditor_name"
            description="%contexts_RDataEditor_description">
      </context>
   </extension>
   <extension
         point="org.eclipse.ui.editors">
      <editor
            id="de.walware.statet.r.editors.RData"
            icon="icons/view_16/r_data_editor.png"
            name="R Data Viewer"
            class="de.walware.statet.r.internal.ui.dataeditor.RDataEditor"
            contributorClass="de.walware.statet.r.internal.ui.dataeditor.RDataEditorActionBarContributor"
            default="true">
      </editor>
   </extension>
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="org.eclipse.ui.edit.text.goto.line"
            contextId="de.walware.statet.r.contexts.RDataEditor"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+L">
      </key>
   </extension>
   
   <!-- R Graphics -->
   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            id="de.walware.statet.r.preferencePages.RGraphicsPage"
            category="de.walware.statet.base.preferencePages.StatetBase"
            name="%preferencePages_RGraphicsPage_name"
            class="de.walware.rj.eclient.graphics.RGraphicsPreferencePage">
         <keywordReference id="de.walware.ecommons.ltk.keywords.SourceAppearance"/>
      </page>
   </extension>
   <extension
         point="org.eclipse.ui.views">
      <view
            id="de.walware.statet.r.views.RGraphic"
            category="de.walware.statet.base.views.StatetCategory"
            icon="icons/obj_16/r-graphic.png"
            name="%views_RGraphicView_name"
            class="de.walware.statet.r.internal.ui.graphics.StatetRGraphicView"
            allowMultiple="true"
            restorable="true">
      </view>
   </extension>
   
   <extension
         point="org.eclipse.core.runtime.adapters">
      <factory
            adaptableType="de.walware.statet.r.core.model.IRElement"
            class="de.walware.statet.r.internal.ui.RElementAdapterFactory">
         <adapter
               type="org.eclipse.core.resources.IResource">
         </adapter>
         <adapter
               type="org.eclipse.search.ui.ISearchPageScoreComputer">
         </adapter>
      </factory>
      <factory
            adaptableType="org.eclipse.ui.IEditorInput"
            class="de.walware.statet.r.internal.ui.REditorInputAdapterFactory">
         <adapter
               type="org.eclipse.search.ui.ISearchPageScoreComputer">
         </adapter>
      </factory>
   </extension>
   
   <extension
         point="org.eclipse.core.variables.dynamicVariables">
      <variable
            name="r_object_name"
            description="%variables_RObjectName_description"
            supportsArgument="false"
            resolver="de.walware.statet.r.ui.rtool.RElementNameVariableResolver">
      </variable>
   </extension>
   
</plugin>
